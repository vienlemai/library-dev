====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    []
Queries   20

[3ms] Select * from `cron_manager` order by `rundate` desc limit 1
[3ms] Insert into `cron_manager` (`rundate`, `runtime`) values (%s, %s)
[3ms] Select * from `cron_manager` where `rundate` <= %s
[2ms] Select * from `accounts` where `id` = %s limit 1
[2ms] Select * from `users` where `id` = %s limit 1
[1ms] Select * from `groups` where `groups`.`id` = %s limit 1
[1ms] Select * from `storages` where `parent_id` is null
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = %s and `status` = %s) >= 1
[7ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = %s and `status` = %s) >= 1
[2ms] Select * from `storages` where `id` = %s limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = %s order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = %s order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (%s)) >= 1
[1ms] Select * from `storages` where `id` = %s limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = %s order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = %s order by `lft` asc
[1ms] Select * from `storages` where `id` = %s limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = %s order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = %s order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (%s, %s, %s, %s, %s, %s, %s, %s, %s)) >= 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    []
Queries   17

[2ms] Select * from `accounts` where `id` = %s limit 1
[2ms] Select * from `users` where `id` = %s limit 1
[1ms] Select * from `groups` where `groups`.`id` = %s limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = %s and `status` = %s) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = %s and `status` = %s) >= 1
[2ms] Select * from `storages` where `id` = %s limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = %s order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = %s order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (%s)) >= 1
[2ms] Select * from `storages` where `id` = %s limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = %s order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = %s order by `lft` asc
[1ms] Select * from `storages` where `id` = %s limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = %s order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = %s order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (%s, %s, %s, %s, %s, %s, %s, %s, %s)) >= 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    []
Queries   17

[3ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[3ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[6ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    []
Queries   17

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    []
Queries   6

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[7ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59
[2ms] Select count(*) as aggregate from `circulations` where `returned` =  and `is_lost` = 
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    []
Queries   17

[1ms] Select * from `accounts` where `id` = 1 limit 1
[3ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[1ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[2ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    []
Queries   17

[2ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[3ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    []
Queries   17

[3ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[3ms] Select * from `storages` where `parent_id` is null
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[2ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[4ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[3ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[7ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    []
Queries   17

[1ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"day"}
Queries   17

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[1ms] Select * from `storages` where `parent_id` is null
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[3ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"day"}
Queries   18

[3ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[5ms] Select * from `storages` where `parent_id` is null
[7ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[2ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[9ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[3ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"day"}
Queries   18

[1ms] Select * from `accounts` where `id` = 1 limit 1
[3ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[3ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[2ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"week"}
Queries   32

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[7ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[3ms] Select * from `books` where `status` = 3 and `published_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
[3ms] Select * from `users` where `users`.`id` = 1 limit 1
[2ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[2ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[2ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[2ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[2ms] Select * from `users` where `users`.`id` = 1 limit 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"month"}
Queries   18

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[1ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[2ms] Select * from `storages` where `id` = 1 limit 1
[4ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[3ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-30 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"custom","start":"01\/06\/2014","end":"30\/06\/2014"}
Queries   18

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[3ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 01:04:30 and 2014-06-30 01:04:30 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"custom","start":"01\/06\/2014","end":"30\/06\/2014"}
Queries   18

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 01:04:39 and 2014-06-30 01:04:39 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"custom","start":"01\/05\/2014","end":"30\/06\/2014"}
Queries   32

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[1ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[2ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[3ms] Select * from `books` where `status` = 3 and `published_at` between 2014-05-01 01:04:49 and 2014-06-30 01:04:49 order by `published_at` asc
[2ms] Select * from `users` where `users`.`id` = 1 limit 1
[2ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[3ms] Select * from `users` where `users`.`id` = 1 limit 1
[2ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[2ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[2ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[2ms] Select * from `users` where `users`.`id` = 1 limit 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"day"}
Queries   18

[2ms] Select * from `accounts` where `id` = 1 limit 1
[3ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"week"}
Queries   32

[2ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[3ms] Select * from `books` where `status` = 3 and `published_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[2ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[2ms] Select * from `users` where `users`.`id` = 1 limit 1
[2ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[2ms] Select * from `users` where `users`.`id` = 1 limit 1
[2ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[2ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"week","start":"26\/05\/2014","end":"01\/06\/2014"}
Queries   19

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[5ms] Select * from `books` where `status` = 3 and `published_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
[1ms] Select * from `users` where `users`.`id` in (1)
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"week","start":"26\/05\/2014","end":"01\/06\/2014"}
Queries   19

[2ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[2ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[3ms] Select * from `books` where `status` = 3 and `published_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
[1ms] Select * from `users` where `users`.`id` in (1)
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"day"}
Queries   18

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[3ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"week"}
Queries   19

[3ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[2ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[4ms] Select * from `books` where `status` = 3 and `published_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
[1ms] Select * from `users` where `users`.`id` in (1)
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/circulation
Process   CirculationController@index
Type      HTML
Params    []
Queries   4

[2ms] Select * from `accounts` where `id` = 1 limit 1
[3ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `inventories` where `status` = 0 limit 1
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/circulation/reader
Process   CirculationController@loadReader
Type      AJAX
Params    {"barcode":"8931900538565"}
Queries   6

[3ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `readers` where `barcode` = 8931900538565 limit 1
[2ms] Select * from `circulations` where `returned` =  and `circulations`.`reader_id` in (1)
[2ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 131)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[2ms] Select * from `configs` where `key` = book_expired_fine limit 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/reader/history/1
Process   ReaderController@history
Type      AJAX
Params    []
Queries   13

[1ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `readers` where `id` = 1 limit 1
[2ms] Select * from `circulations` where `reader_id` = 1 order by `created_at` desc
[2ms] Select * from `book_items` where `book_items`.`id` = 131 limit 1
[2ms] Select * from `books` where `books`.`id` = 7 limit 1
[2ms] Select * from `book_items` where `book_items`.`id` = 135 limit 1
[3ms] Select * from `books` where `books`.`id` = 7 limit 1
[2ms] Select * from `book_items` where `book_items`.`id` = 125 limit 1
[2ms] Select * from `books` where `books`.`id` = 6 limit 1
[2ms] Select * from `book_items` where `book_items`.`id` = 87 limit 1
[3ms] Select * from `books` where `books`.`id` = 4 limit 1
[2ms] Select * from `book_items` where `book_items`.`id` = 58 limit 1
[2ms] Select * from `books` where `books`.`id` = 3 limit 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/reader/history/1
Process   ReaderController@history
Type      AJAX
Params    []
Queries   13

[3ms] Select * from `accounts` where `id` = 1 limit 1
[3ms] Select * from `readers` where `id` = 1 limit 1
[2ms] Select * from `circulations` where `reader_id` = 1 order by `created_at` desc
[2ms] Select * from `book_items` where `book_items`.`id` = 131 limit 1
[3ms] Select * from `books` where `books`.`id` = 7 limit 1
[3ms] Select * from `book_items` where `book_items`.`id` = 135 limit 1
[2ms] Select * from `books` where `books`.`id` = 7 limit 1
[2ms] Select * from `book_items` where `book_items`.`id` = 125 limit 1
[2ms] Select * from `books` where `books`.`id` = 6 limit 1
[2ms] Select * from `book_items` where `book_items`.`id` = 87 limit 1
[3ms] Select * from `books` where `books`.`id` = 4 limit 1
[1ms] Select * from `book_items` where `book_items`.`id` = 58 limit 1
[2ms] Select * from `books` where `books`.`id` = 3 limit 1
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/circulation/book
Process   CirculationController@loadBook
Type      AJAX
Params    {"barcode":"8932381920085","readerId":"1"}
Queries   8

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `book_items` where `barcode` = 8932381920085 limit 1
[2ms] Select * from `books` where `books`.`id` in (3)
[2ms] Select * from `readers`
[2ms] Select * from `circulations` where `returned` =  and `circulations`.`reader_id` in (1)
[1ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 131)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[2ms] Select * from `circulations` where `book_item_id` = 58 and `reader_id` = 1 limit 1
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/circulation/lost
Process   CirculationController@lost
Type      AJAX
Params    {"readerId":"1","bookItemId":"58"}
Queries   9

[3ms] Select * from `accounts` where `id` = 1 limit 1
[6ms] Update `circulations` set `is_lost` = 1 where `reader_id` = 1 and `book_item_id` = 58 and `returned` = 
[5ms] Select * from `circulations` where `reader_id` = 1 and `returned` =  and `is_lost` = 
[4ms] Select * from `book_items` where `book_items`.`id` in (87, 125, 131)
[3ms] Select * from `books` where `books`.`id` in (4, 6, 7)
[7ms] Update `book_items` set `status` = 0 where `id` = 58
[2ms] Select `book_id` from `book_items` where `id` = 58 limit 1
[4ms] Update `books` set `lost` = `lost` + 1, `updated_at` = 2014-06-01 01:10:10 where `id` = 3
[4ms] Update `books` set `lended` = `lended` - 1, `updated_at` = 2014-06-01 01:10:10 where `id` = 3
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/reader/history/1
Process   ReaderController@history
Type      AJAX
Params    []
Queries   13

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `readers` where `id` = 1 limit 1
[2ms] Select * from `circulations` where `reader_id` = 1 order by `created_at` desc
[2ms] Select * from `book_items` where `book_items`.`id` = 131 limit 1
[2ms] Select * from `books` where `books`.`id` = 7 limit 1
[1ms] Select * from `book_items` where `book_items`.`id` = 135 limit 1
[3ms] Select * from `books` where `books`.`id` = 7 limit 1
[2ms] Select * from `book_items` where `book_items`.`id` = 125 limit 1
[3ms] Select * from `books` where `books`.`id` = 6 limit 1
[1ms] Select * from `book_items` where `book_items`.`id` = 87 limit 1
[3ms] Select * from `books` where `books`.`id` = 4 limit 1
[2ms] Select * from `book_items` where `book_items`.`id` = 58 limit 1
[3ms] Select * from `books` where `books`.`id` = 3 limit 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    []
Queries   6

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59
[2ms] Select count(*) as aggregate from `circulations` where `returned` =  and `is_lost` = 
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    []
Queries   19

[3ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select count(`lost`) as aggregate from `books`
[2ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    []
Queries   19

[1ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[1ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    []
Queries   19

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[3ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    []
Queries   19

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    []
Queries   20

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[7ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    []
Queries   20

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    []
Queries   21

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"week"}
Queries   22

[2ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[1ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[2ms] Select count(*) as aggregate from `circulations` where `expired` = 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[3ms] Select * from `books` where `status` = 3 and `published_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
[1ms] Select * from `users` where `users`.`id` in (1)
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"week"}
Queries   22

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[3ms] Select * from `books` where `status` = 3 and `published_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
[2ms] Select * from `users` where `users`.`id` in (1)
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"month"}
Queries   21

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
[2ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[4ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[3ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-30 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"month","start":"01\/06\/2014","end":"30\/06\/2014"}
Queries   21

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-30 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"day"}
Queries   21

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"month"}
Queries   21

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[2ms] Select count(*) as aggregate from `circulations` where `expired` = 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-30 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    []
Queries   6

[2ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[1ms] Select * from `circulations` where `created_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59
[1ms] Select count(*) as aggregate from `circulations` where `returned` =  and `is_lost` = 
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    {"time":"month","type":"borrow"}
Queries   6

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[3ms] Select * from `circulations` where `created_at` between 2014-06-01 00:00:00 and 2014-06-30 23:59:59
[2ms] Select count(*) as aggregate from `circulations` where `returned` =  and `is_lost` = 
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    []
Queries   21

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[4ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[0ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[7ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[1ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    []
Queries   21

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[3ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    []
Queries   7

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[3ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    []
Queries   7

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[1ms] Select * from `circulations` where `created_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[2ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/print/circulation
Process   StatisticsController@printCirculation
Type      HTML
Params    {"time":"day","type":"borrow","start":"01\/06\/2014","end":"01\/06\/2014"}
Queries   6

[36ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[3ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[4ms] Select * from `circulations` where `created_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59
[1ms] Select count(*) as aggregate from `circulations` where `returned` =  and `is_lost` = 
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000
Process   PageController@index
Type      HTML
Params    []
Queries   11

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:28:33 where `key` = last_execute
[1ms] Select * from `configs`
[44ms] Select * from `storages` where `parent_id` is null order by `storages`.`lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select count(*) as aggregate from `books` where `level` not in (2, 3, 4) and `status` = 3
[2ms] Select * from `books` where `level` not in (2, 3, 4) and `status` = 3 order by `published_at` desc limit 20 offset 0
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/login
Process   PageController@login
Type      HTML
Params    []
Queries   5

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[2ms] Update `configs` set `value` = 2014-06-01 20:28:40 where `key` = last_execute
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/login
Process   AdminController@postLogin
Type      HTML
Params    {"username":"lemaibk08@gmail.com","password":"123456"}
Queries   6

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[20ms] Update `configs` set `value` = 2014-06-01 20:28:42 where `key` = last_execute
[52ms] Select * from `accounts` where `username` = lemaibk08@gmail.com limit 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000
Process   PageController@index
Type      HTML
Params    []
Queries   9

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[3ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:28:43 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 2 limit 1
[2ms] Select * from `readers` where `readers`.`id` = 1 limit 1
[2ms] Select count(*) as aggregate from `books` where `level` not in (2, 3, 4) and `status` = 3
[3ms] Select * from `books` where `level` not in (2, 3, 4) and `status` = 3 order by `published_at` desc limit 20 offset 0
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/lich-su-muon-tra
Process   ProfileController@history
Type      HTML
Params    []
Queries   19

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[1ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[2ms] Update `configs` set `value` = 2014-06-01 20:28:46 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 2 limit 1
[2ms] Select * from `readers` where `readers`.`id` = 1 limit 1
[2ms] Select count(*) as aggregate from `circulations` where `reader_id` = 1
[2ms] Select * from `circulations` where `reader_id` = 1 order by `created_at` desc limit 20 offset 0
[2ms] Select * from `book_items` where `book_items`.`id` = 131 limit 1
[1ms] Select * from `books` where `books`.`id` = 7 limit 1
[1ms] Select * from `book_items` where `book_items`.`id` = 135 limit 1
[2ms] Select * from `books` where `books`.`id` = 7 limit 1
[2ms] Select * from `book_items` where `book_items`.`id` = 125 limit 1
[2ms] Select * from `books` where `books`.`id` = 6 limit 1
[2ms] Select * from `book_items` where `book_items`.`id` = 87 limit 1
[2ms] Select * from `books` where `books`.`id` = 4 limit 1
[1ms] Select * from `book_items` where `book_items`.`id` = 58 limit 1
[1ms] Select * from `books` where `books`.`id` = 3 limit 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/tai-lieu-dang-muon
Process   ProfileController@borrowing
Type      HTML
Params    []
Queries   10

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:29:00 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 2 limit 1
[2ms] Select * from `readers` where `readers`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `reader_id` = 1 and `returned` =  order by `created_at` desc
[1ms] Select * from `book_items` where `book_items`.`id` in (131, 125, 87, 58)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/tai-khoan
Process   ProfileController@account
Type      HTML
Params    []
Queries   7

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[3ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[2ms] Update `configs` set `value` = 2014-06-01 20:29:11 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 2 limit 1
[2ms] Select * from `readers` where `readers`.`id` = 1 limit 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/gio-sach
Process   CartController@show
Type      HTML
Params    []
Queries   11

[4ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[4ms] Update `configs` set `value` = 2014-06-01 20:29:15 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 2 limit 1
[2ms] Select * from `readers` where `readers`.`id` = 1 limit 1
[1ms] Select * from `circulations` where `reader_id` = 1 and `returned` = 
[2ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 131)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[49ms] Select * from `orders` where `reader_id` = 1 and `status` = new
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin
Process   AdminController@index
Type      HTML
Params    []
Queries   6

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:29:45 where `key` = last_execute
[1ms] Select * from `accounts` where `id` = 2 limit 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/login
Process   AdminController@login
Type      HTML
Params    []
Queries   6

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[3ms] Select * from `books` where `books`.`id` in (4, 6)
[64ms] Update `configs` set `value` = 2014-06-01 20:29:46 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 2 limit 1
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/login
Process   AdminController@postLogin
Type      HTML
Params    {"username":"admin","password":"123456"}
Queries   7

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[3ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[3ms] Select * from `books` where `books`.`id` in (4, 6)
[4ms] Update `configs` set `value` = 2014-06-01 20:29:49 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 2 limit 1
[2ms] Select * from `accounts` where `username` = admin limit 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin
Process   AdminController@index
Type      HTML
Params    []
Queries   24

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[1ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:29:49 where `key` = last_execute
[1ms] Select * from `accounts` where `id` = 1 limit 1
[59ms] Select * from `users` where `id` = 1 limit 1
[34ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[39ms] Select count(*) as aggregate from `activities`
[2ms] Select * from `activities` order by `created_at` desc limit 10 offset 0
[2ms] Select * from `readers` where `id` in (1)
[2ms] Select * from `users` where `id` in (1)
[2ms] Select * from `books` where `id` in (7, 6, 4, 3)
[2ms] Select * from `readers` where `id` in (1)
[2ms] Select count(*) as aggregate from `readers` where `reader_type` = 3
[1ms] Select count(*) as aggregate from `readers` where `reader_type` = 2
[2ms] Select count(*) as aggregate from `readers` where `reader_type` = 1
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1) >= 1
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2) >= 1
[2ms] Select count(*) as aggregate from `users`
[2ms] Select count(*) as aggregate from `orders` where `status` = new
[2ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/order
Process   OrderController@index
Type      HTML
Params    []
Queries   12

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[1ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[6ms] Update `configs` set `value` = 2014-06-01 20:29:55 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[1ms] Select count(*) as aggregate from `orders`
[1ms] Select * from `orders` order by `created_at` desc limit 20 offset 0
[2ms] Select * from `readers` where `readers`.`id` in (1)
[1ms] Select * from `books` where `books`.`id` in (8, 10)
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/order/approve
Process   OrderController@approve
Type      HTML
Params    {"time_pick_up":"","id":"3","_token":"ytXqOeUdlNnaGK9MuC8aNkCOyXzTO49M17IYVadP"}
Queries   8

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[11ms] Update `configs` set `value` = 2014-06-01 20:30:02 where `key` = last_execute
[3ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `orders` where `id` = 3 limit 1
[2ms] Select * from `books` where `books`.`id` in (8)
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/order
Process   OrderController@index
Type      HTML
Params    []
Queries   12

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:30:02 where `key` = last_execute
[8ms] Select * from `accounts` where `id` = 1 limit 1
[4ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[1ms] Select count(*) as aggregate from `orders`
[1ms] Select * from `orders` order by `created_at` desc limit 20 offset 0
[1ms] Select * from `readers` where `readers`.`id` in (1)
[2ms] Select * from `books` where `books`.`id` in (8, 10)
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/order/approve
Process   OrderController@approve
Type      HTML
Params    {"time_pick_up":"04\/06\/2014","id":"3","_token":"ytXqOeUdlNnaGK9MuC8aNkCOyXzTO49M17IYVadP"}
Queries   9

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[3ms] Select * from `books` where `books`.`id` in (4, 6)
[4ms] Update `configs` set `value` = 2014-06-01 20:30:11 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `orders` where `id` = 3 limit 1
[2ms] Select * from `books` where `books`.`id` in (8)
[3ms] Update `orders` set `status` = approved, `pick_up_at` = 2014-06-04 20:30:11, `approved_by` = 1, `approved_at` = 2014-06-01 20:30:11 where `id` = 3
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/order
Process   OrderController@index
Type      HTML
Params    []
Queries   12

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[12ms] Update `configs` set `value` = 2014-06-01 20:30:11 where `key` = last_execute
[3ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[1ms] Select count(*) as aggregate from `orders`
[2ms] Select * from `orders` order by `created_at` desc limit 20 offset 0
[1ms] Select * from `readers` where `readers`.`id` in (1)
[2ms] Select * from `books` where `books`.`id` in (8, 10)
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/reader
Process   StatisticsController@reader
Type      HTML
Params    []
Queries   8

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[3ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[32ms] Update `configs` set `value` = 2014-06-01 20:30:44 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    []
Queries   24

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[3ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:32:02 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[1ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[2ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"week"}
Queries   25

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[3ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[5ms] Select * from `books` where `books`.`id` in (4, 6)
[4ms] Update `configs` set `value` = 2014-06-01 20:32:27 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[3ms] Select * from `books` where `status` = 3 and `published_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
[2ms] Select * from `users` where `users`.`id` in (1)
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"custom","start":"26\/05\/2014","end":"01\/06\/2014"}
Queries   25

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[20ms] Update `configs` set `value` = 2014-06-01 20:32:44 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[3ms] Select * from `books` where `status` = 3 and `published_at` between 2014-05-26 20:32:45 and 2014-06-01 20:32:45 order by `published_at` asc
[1ms] Select * from `users` where `users`.`id` in (1)
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"day"}
Queries   24

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:32:50 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"day"}
Queries   24

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[3ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[1570.09ms] Update `configs` set `value` = 2014-06-01 20:34:03 where `key` = last_execute
[3ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[9ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[8ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[2ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[7ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[7ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[3ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"day"}
Queries   24

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[3ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[3ms] Select * from `books` where `books`.`id` in (4, 6)
[5ms] Update `configs` set `value` = 2014-06-01 20:35:15 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[3ms] Select * from `storages` where `parent_id` is null
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"day"}
Queries   24

[4ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[3ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:36:42 where `key` = last_execute
[1ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"day"}
Queries   24

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[2ms] Update `configs` set `value` = 2014-06-01 20:37:37 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[2ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"day"}
Queries   24

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[1ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[2ms] Update `configs` set `value` = 2014-06-01 20:37:54 where `key` = last_execute
[1ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[2ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"day"}
Queries   24

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[1ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:38:02 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[3ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[2ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"day"}
Queries   24

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[1ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[5ms] Update `configs` set `value` = 2014-06-01 20:39:02 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"day"}
Queries   24

[26ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[22ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:39:10 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[4ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[1ms] Select * from `storages` where `parent_id` is null
[3ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[0ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[0ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[3ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[0ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"day"}
Queries   24

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[1ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:39:19 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[1ms] Select * from `storages` where `parent_id` is null
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"day"}
Queries   24

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[3ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:41:26 where `key` = last_execute
[1ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"day"}
Queries   24

[4ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:42:14 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[3ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[9ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[8ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[3ms] Select * from `storages` where `id` = 1 limit 1
[4ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[7ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `id` = 6 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"day"}
Queries   24

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[5ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[4ms] Update `configs` set `value` = 2014-06-01 20:42:22 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[2ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"day"}
Queries   24

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[30ms] Update `configs` set `value` = 2014-06-01 20:52:24 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[4ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[3ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    []
Queries   12

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[1ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[3ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[3ms] Select * from `books` where `books`.`id` in (4, 6)
[2ms] Update `configs` set `value` = 2014-06-01 20:52:29 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[3ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[3ms] Select * from `circulations` where `created_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[2ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    {"time":"day","type":"borrow","start":"01\/06\/2014","end":"01\/06\/2014"}
Queries   12

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[3ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[3ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:52:32 where `key` = last_execute
[1ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    {"time":"week","type":"borrow"}
Queries   16

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[10ms] Update `configs` set `value` = 2014-06-01 20:52:36 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59
[2ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 135, 131)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[1ms] Select * from `readers` where `readers`.`id` in (1)
[1ms] Select * from `users` where `users`.`id` in (1)
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select count(*) as aggregate from `circulations` where `returned` = 
[2ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    {"time":"month","type":"borrow"}
Queries   12

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[2ms] Update `configs` set `value` = 2014-06-01 20:52:45 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[1ms] Select * from `circulations` where `created_at` between 2014-06-01 00:00:00 and 2014-06-30 23:59:59
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    {"time":"week","type":"borrow"}
Queries   16

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:52:49 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[5ms] Select * from `users` where `id` = 1 limit 1
[3ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59
[2ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 135, 131)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[2ms] Select * from `readers` where `readers`.`id` in (1)
[1ms] Select * from `users` where `users`.`id` in (1)
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[0ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    {"time":"custom","type":"borrow","start":"","end":""}
Queries   8

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[4ms] Update `configs` set `value` = 2014-06-01 20:53:17 where `key` = last_execute
[3ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    {"time":"week","type":"borrow"}
Queries   16

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:53:17 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[3ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[1ms] Select * from `circulations` where `created_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59
[1ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 135, 131)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[2ms] Select * from `readers` where `readers`.`id` in (1)
[2ms] Select * from `users` where `users`.`id` in (1)
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    {"time":"custom","type":"borrow","start":"","end":""}
Queries   8

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[4ms] Update `configs` set `value` = 2014-06-01 20:54:01 where `key` = last_execute
[1ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    {"time":"week","type":"borrow"}
Queries   16

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[1ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[3ms] Select * from `books` where `books`.`id` in (4, 6)
[4ms] Update `configs` set `value` = 2014-06-01 20:54:02 where `key` = last_execute
[1ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59
[1ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 135, 131)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[2ms] Select * from `readers` where `readers`.`id` in (1)
[2ms] Select * from `users` where `users`.`id` in (1)
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    {"time":"week","type":"borrow"}
Queries   16

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[3ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:54:32 where `key` = last_execute
[1ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59
[2ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 135, 131)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[1ms] Select * from `readers` where `readers`.`id` in (1)
[2ms] Select * from `users` where `users`.`id` in (1)
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[5ms] Select count(*) as aggregate from `circulations` where `returned` = 
[2ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    {"time":"week","type":"borrow"}
Queries   16

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[1ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:54:39 where `key` = last_execute
[1ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59
[2ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 135, 131)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[1ms] Select * from `readers` where `readers`.`id` in (1)
[2ms] Select * from `users` where `users`.`id` in (1)
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    {"time":"week","type":"borrow"}
Queries   16

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:54:46 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59
[2ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 135, 131)
[3ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[2ms] Select * from `readers` where `readers`.`id` in (1)
[1ms] Select * from `users` where `users`.`id` in (1)
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    {"time":"month","type":"borrow"}
Queries   12

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[1ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[3ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:54:52 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[1ms] Select * from `circulations` where `created_at` between 2014-06-01 00:00:00 and 2014-06-30 23:59:59
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[2ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    {"time":"week","type":"borrow"}
Queries   16

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[1ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:54:57 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59
[2ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 135, 131)
[3ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[2ms] Select * from `readers` where `readers`.`id` in (1)
[1ms] Select * from `users` where `users`.`id` in (1)
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[2ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    {"time":"week","type":"borrow"}
Queries   16

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:56:35 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59
[1ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 135, 131)
[1ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[2ms] Select * from `readers` where `readers`.`id` in (1)
[1ms] Select * from `users` where `users`.`id` in (1)
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    {"time":"week","type":"borrow","start":"26\/05\/2014","end":"01\/06\/2014"}
Queries   16

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[3ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[1ms] Select * from `books` where `books`.`id` in (4, 6)
[2ms] Update `configs` set `value` = 2014-06-01 20:57:18 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59
[1ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 135, 131)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[1ms] Select * from `readers` where `readers`.`id` in (1)
[2ms] Select * from `users` where `users`.`id` in (1)
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[2ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/print/circulation
Process   StatisticsController@printCirculation
Type      HTML
Params    {"time":"week","type":"borrow","start":"26\/05\/2014","end":"01\/06\/2014"}
Queries   16

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[1ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[4ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[2ms] Update `configs` set `value` = 2014-06-01 20:58:34 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59
[2ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 135, 131)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[1ms] Select * from `readers` where `readers`.`id` in (1)
[2ms] Select * from `users` where `users`.`id` in (1)
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    {"time":"week","type":"borrow","start":"26\/05\/2014","end":"01\/06\/2014"}
Queries   16

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 20:59:17 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59
[1ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 135, 131)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[2ms] Select * from `readers` where `readers`.`id` in (1)
[1ms] Select * from `users` where `users`.`id` in (1)
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    {"time":"week","type":"borrow","start":"26\/05\/2014","end":"01\/06\/2014"}
Queries   16

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[31ms] Update `configs` set `value` = 2014-06-01 20:59:56 where `key` = last_execute
[1ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59
[1ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 135, 131)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[2ms] Select * from `readers` where `readers`.`id` in (1)
[1ms] Select * from `users` where `users`.`id` in (1)
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    {"time":"week","type":"borrow","start":"26\/05\/2014","end":"01\/06\/2014"}
Queries   16

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[4ms] Update `configs` set `value` = 2014-06-01 21:00:08 where `key` = last_execute
[1ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59
[1ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 135, 131)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[2ms] Select * from `readers` where `readers`.`id` in (1)
[1ms] Select * from `users` where `users`.`id` in (1)
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    []
Queries   24

[3ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[5ms] Update `configs` set `value` = 2014-06-01 21:02:40 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[6ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[8ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[1ms] Select * from `storages` where `id` = 6 limit 1
[5ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[1ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[8ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select * from `books` where `status` = 3 and `published_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/book
Process   StatisticsController@book
Type      HTML
Params    {"time":"week"}
Queries   25

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[2ms] Update `configs` set `value` = 2014-06-01 21:02:44 where `key` = last_execute
[1ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `storages` where `parent_id` is null
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1 and `status` = 3) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2 and `status` = 3) >= 1
[1ms] Select * from `storages` where `id` = 1 limit 1
[1ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 1 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (1)) >= 1
[1ms] Select * from `storages` where `id` = 2 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 2 order by `lft` asc
[2ms] Select * from `storages` where `id` = 6 limit 1
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[2ms] Select * from `storages` where `storages`.`parent_id` = 6 order by `lft` asc
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `storage` in (3, 4, 5, 7, 8, 9, 10, 11, 12)) >= 1
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[3ms] Select * from `books` where `status` = 3 and `published_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59 order by `published_at` asc
[1ms] Select * from `users` where `users`.`id` in (1)
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    []
Queries   12

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 21:06:29 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    {"time":"week","type":"borrow"}
Queries   16

[4ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[3ms] Select * from `books` where `books`.`id` in (4, 6)
[2ms] Update `configs` set `value` = 2014-06-01 21:06:33 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59
[2ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 135, 131)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[2ms] Select * from `readers` where `readers`.`id` in (1)
[1ms] Select * from `users` where `users`.`id` in (1)
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/print/circulation
Process   StatisticsController@printCirculation
Type      HTML
Params    {"time":"week","type":"borrow","start":"26\/05\/2014","end":"01\/06\/2014"}
Queries   16

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[1ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[3ms] Update `configs` set `value` = 2014-06-01 21:06:36 where `key` = last_execute
[1ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59
[1ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 135, 131)
[3ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[1ms] Select * from `readers` where `readers`.`id` in (1)
[2ms] Select * from `users` where `users`.`id` in (1)
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/print/circulation
Process   StatisticsController@printCirculation
Type      HTML
Params    {"time":"week","type":"borrow","start":"26\/05\/2014","end":"01\/06\/2014"}
Queries   16

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[4ms] Update `configs` set `value` = 2014-06-01 21:06:51 where `key` = last_execute
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59
[1ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 135, 131)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[2ms] Select * from `readers` where `readers`.`id` in (1)
[1ms] Select * from `users` where `users`.`id` in (1)
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/print/circulation
Process   StatisticsController@printCirculation
Type      HTML
Params    {"time":"week","type":"borrow","start":"26\/05\/2014","end":"01\/06\/2014"}
Queries   16

[2ms] Select * from `readers` where (select count(*) from `circulations` where `circulations`.`reader_id` = `readers`.`id` and `is_lost` =  and `is_reminded` =  and `returned` = ) >= 1
[2ms] Select * from `circulations` where `returned` =  and `is_reminded` =  and `reader_id` = 1
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[5ms] Update `configs` set `value` = 2014-06-01 21:07:12 where `key` = last_execute
[1ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-05-26 00:00:00 and 2014-06-01 23:59:59
[1ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 135, 131)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[1ms] Select * from `readers` where `readers`.`id` in (1)
[2ms] Select * from `users` where `users`.`id` in (1)
[2ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000
Process   PageController@index
Type      HTML
Params    []
Queries   7

[1ms] Select * from `configs` where `key` = last_execute limit 1
[1ms] Select * from `configs`
[1ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `users`.`id` = 1 limit 1
[3ms] Update `accounts` set `remember_token` = gctgCMhslyBYGY9368dSfUuuABD5fD5j944pGbxYUEI7KQFrTwtUJi6Zf6fS where `id` = 1
[1ms] Select count(*) as aggregate from `books` where `level` not in (2, 3, 4) and `status` = 3
[2ms] Select * from `books` where `level` not in (2, 3, 4) and `status` = 3 order by `published_at` desc limit 20 offset 0
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin
Process   AdminController@index
Type      HTML
Params    []
Queries   0

====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin
Process   AdminController@index
Type      HTML
Params    []
Queries   0

====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/login
Process   AdminController@login
Type      HTML
Params    []
Queries   0

====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/login
Process   AdminController@postLogin
Type      HTML
Params    {"username":"admin","password":"123456"}
Queries   1

[2ms] Select * from `accounts` where `username` = admin limit 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin
Process   AdminController@index
Type      HTML
Params    []
Queries   19

[2ms] Select * from `accounts` where `id` = 1 limit 1
[19ms] Select * from `users` where `id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select count(*) as aggregate from `activities`
[1ms] Select * from `activities` order by `created_at` desc limit 10 offset 0
[2ms] Select * from `readers` where `id` in (1)
[2ms] Select * from `users` where `id` in (1)
[3ms] Select * from `books` where `id` in (7, 6, 4, 3)
[2ms] Select * from `readers` where `id` in (1)
[1ms] Select count(*) as aggregate from `readers` where `reader_type` = 3
[1ms] Select count(*) as aggregate from `readers` where `reader_type` = 2
[1ms] Select count(*) as aggregate from `readers` where `reader_type` = 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 1) >= 1
[5ms] Select count(*) as aggregate from `book_items` where (select count(*) from `books` where `book_items`.`book_id` = `books`.`id` and `book_type` = 2) >= 1
[2ms] Select count(*) as aggregate from `users`
[2ms] Select count(*) as aggregate from `orders` where `status` = new
[1ms] Select * from `users` where `users`.`id` = 1 limit 1
[1ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    []
Queries   7

[2ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[1ms] Select count(*) as aggregate from `circulations` where `returned` = 
[1ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/statistics/circulation
Process   StatisticsController@circulation
Type      HTML
Params    []
Queries   7

[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[2ms] Select * from `circulations` where `created_at` between 2014-06-01 00:00:00 and 2014-06-01 23:59:59
[1ms] Select count(*) as aggregate from `circulations` where `is_lost` = 1
[2ms] Select count(*) as aggregate from `circulations` where `returned` = 
[2ms] Select count(*) as aggregate from `circulations` where `expired` = 1
====================================================================================================
====================================================================================================
Started   [GET] http://localhost:8000/admin/circulation
Process   CirculationController@index
Type      HTML
Params    []
Queries   5

[3ms] Select * from `configs` where `key` = last_execute limit 1
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `users` where `id` = 1 limit 1
[2ms] Select * from `groups` where `groups`.`id` = 1 limit 1
[32ms] Select * from `inventories` where `status` = 0 limit 1
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/circulation/reader
Process   CirculationController@loadReader
Type      AJAX
Params    {"barcode":"8931900538565"}
Queries   7

[2ms] Select * from `configs` where `key` = last_execute limit 1
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `readers` where `barcode` = 8931900538565 limit 1
[2ms] Select * from `circulations` where `returned` =  and `circulations`.`reader_id` in (1)
[2ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 131)
[3ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[1ms] Select * from `configs` where `key` = book_expired_fine limit 1
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/circulation/book
Process   CirculationController@loadBook
Type      AJAX
Params    {"barcode":"8931793670014","readerId":"1"}
Queries   9

[2ms] Select * from `configs` where `key` = last_execute limit 1
[2ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `book_items` where `barcode` = 8931793670014 limit 1
[2ms] Select * from `books` where `books`.`id` in (7)
[1ms] Select * from `readers`
[2ms] Select * from `circulations` where `returned` =  and `circulations`.`reader_id` in (1)
[1ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125, 131)
[3ms] Select * from `books` where `books`.`id` in (3, 4, 6, 7)
[1ms] Select * from `circulations` where `book_item_id` = 131 and `reader_id` = 1 limit 1
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/circulation/return
Process   CirculationController@returnBook
Type      AJAX
Params    {"readerId":"1","bookItemId":"131"}
Queries   9

[2ms] Select * from `configs` where `key` = last_execute limit 1
[2ms] Select * from `accounts` where `id` = 1 limit 1
[5ms] Update `circulations` set `returned` = 1, `returned_at` = 2014-06-01 21:28:05 where `reader_id` = 1 and `book_item_id` = 131 and `returned` = 
[1ms] Select * from `circulations` where `reader_id` = 1 and `returned` = 
[2ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6)
[6ms] Update `book_items` set `status` = 0 where `id` = 131
[1ms] Select `book_id` from `book_items` where `id` = 131 limit 1
[3ms] Update `books` set `lended` = `lended` - 1, `updated_at` = 2014-06-01 21:28:05 where `id` = 7
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/circulation/book
Process   CirculationController@loadBook
Type      AJAX
Params    {"barcode":"8932381920085","readerId":"1"}
Queries   8

[2ms] Select * from `configs` where `key` = last_execute limit 1
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `book_items` where `barcode` = 8932381920085 limit 1
[2ms] Select * from `books` where `books`.`id` in (3)
[2ms] Select * from `readers`
[2ms] Select * from `circulations` where `returned` =  and `circulations`.`reader_id` in (1)
[2ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6)
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/circulation/book
Process   CirculationController@loadBook
Type      AJAX
Params    {"barcode":"8932381920085","readerId":"1"}
Queries   9

[2ms] Select * from `configs` where `key` = last_execute limit 1
[2ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `book_items` where `barcode` = 8932381920085 limit 1
[2ms] Select * from `books` where `books`.`id` in (3)
[1ms] Select * from `readers`
[2ms] Select * from `circulations` where `returned` =  and `circulations`.`reader_id` in (1)
[1ms] Select * from `book_items` where `book_items`.`id` in (58, 87, 125)
[2ms] Select * from `books` where `books`.`id` in (3, 4, 6)
[1ms] Select * from `circulations` where `book_item_id` = 58 and `reader_id` = 1 limit 1
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/circulation/return
Process   CirculationController@returnBook
Type      AJAX
Params    {"readerId":"1","bookItemId":"58"}
Queries   9

[2ms] Select * from `configs` where `key` = last_execute limit 1
[2ms] Select * from `accounts` where `id` = 1 limit 1
[3ms] Update `circulations` set `returned` = 1, `returned_at` = 2014-06-01 21:28:25 where `reader_id` = 1 and `book_item_id` = 58 and `returned` = 
[2ms] Select * from `circulations` where `reader_id` = 1 and `returned` = 
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
[8ms] Update `book_items` set `status` = 0 where `id` = 58
[1ms] Select `book_id` from `book_items` where `id` = 58 limit 1
[3ms] Update `books` set `lended` = `lended` - 1, `updated_at` = 2014-06-01 21:28:25 where `id` = 3
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/circulation/book
Process   CirculationController@loadBook
Type      AJAX
Params    {"barcode":"8931000470116","readerId":"1"}
Queries   8

[2ms] Select * from `configs` where `key` = last_execute limit 1
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `book_items` where `barcode` = 8931000470116 limit 1
[3ms] Select * from `books` where `books`.`id` in (5)
[2ms] Select * from `readers`
[2ms] Select * from `circulations` where `returned` =  and `circulations`.`reader_id` in (1)
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/circulation/book
Process   CirculationController@loadBook
Type      AJAX
Params    {"barcode":"8931000470116","readerId":"1"}
Queries   8

[2ms] Select * from `configs` where `key` = last_execute limit 1
[1ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `book_items` where `barcode` = 8931000470116 limit 1
[2ms] Select * from `books` where `books`.`id` in (5)
[2ms] Select * from `readers`
[2ms] Select * from `circulations` where `returned` =  and `circulations`.`reader_id` in (1)
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[1ms] Select * from `books` where `books`.`id` in (4, 6)
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/circulation/book
Process   CirculationController@loadBook
Type      AJAX
Params    {"barcode":"8931000470116","readerId":"1"}
Queries   9

[1ms] Select * from `configs` where `key` = last_execute limit 1
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `book_items` where `barcode` = 8931000470116 limit 1
[2ms] Select * from `books` where `books`.`id` in (5)
[2ms] Select * from `readers`
[1ms] Select * from `circulations` where `returned` =  and `circulations`.`reader_id` in (1)
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125, 111)
[2ms] Select * from `books` where `books`.`id` in (4, 5, 6)
[1ms] Select * from `circulations` where `book_item_id` = 111 and `reader_id` = 1 limit 1
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/circulation/book
Process   CirculationController@loadBook
Type      AJAX
Params    {"barcode":"8931000470116","readerId":"1"}
Queries   8

[2ms] Select * from `configs` where `key` = last_execute limit 1
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `book_items` where `barcode` = 8931000470116 limit 1
[2ms] Select * from `books` where `books`.`id` in (5)
[1ms] Select * from `readers`
[2ms] Select * from `circulations` where `returned` =  and `circulations`.`reader_id` in (1)
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125, 111)
[2ms] Select * from `books` where `books`.`id` in (4, 5, 6)
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/circulation/book
Process   CirculationController@loadBook
Type      AJAX
Params    {"barcode":"8931000470116","readerId":"1"}
Queries   8

[2ms] Select * from `configs` where `key` = last_execute limit 1
[1ms] Select * from `accounts` where `id` = 1 limit 1
[1ms] Select * from `book_items` where `barcode` = 8931000470116 limit 1
[2ms] Select * from `books` where `books`.`id` in (5)
[2ms] Select * from `readers`
[2ms] Select * from `circulations` where `returned` =  and `circulations`.`reader_id` in (1)
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125, 111)
[2ms] Select * from `books` where `books`.`id` in (4, 5, 6)
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/circulation/book
Process   CirculationController@loadBook
Type      AJAX
Params    {"barcode":"8931000470116","readerId":"1"}
Queries   8

[2ms] Select * from `configs` where `key` = last_execute limit 1
[1ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `book_items` where `barcode` = 8931000470116 limit 1
[2ms] Select * from `books` where `books`.`id` in (5)
[2ms] Select * from `readers`
[2ms] Select * from `circulations` where `returned` =  and `circulations`.`reader_id` in (1)
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[1ms] Select * from `books` where `books`.`id` in (4, 6)
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/circulation/book
Process   CirculationController@loadBook
Type      AJAX
Params    {"barcode":"8931000470116","readerId":"1"}
Queries   8

[1ms] Select * from `configs` where `key` = last_execute limit 1
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `book_items` where `barcode` = 8931000470116 limit 1
[2ms] Select * from `books` where `books`.`id` in (5)
[1ms] Select * from `readers`
[2ms] Select * from `circulations` where `returned` =  and `circulations`.`reader_id` in (1)
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125)
[2ms] Select * from `books` where `books`.`id` in (4, 6)
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/circulation/borrow/1
Process   CirculationController@borrow
Type      AJAX
Params    {"readerId":"1","bookItemId":"111"}
Queries   14

[2ms] Select * from `configs` where `key` = last_execute limit 1
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Insert into `circulations` (`reader_id`, `book_item_id`, `scope`, `expired_at`, `created_at`, `created_by`) values (1, 111, 1, 2014-06-01 21:32:01, 2014-06-01 21:32:01, 1)
[2ms] Select * from `readers` where `readers`.`id` = 1 limit 1
[1ms] Select * from `book_items` where `book_items`.`id` = 111 limit 1
[2ms] Select * from `books` where `books`.`id` = 5 limit 1
[7ms] Insert into `activities` (`code`, `author_id`, `author_type`, `object_id`, `object_type`, `group`, `created_at`) values (borrowed_book, 1, Reader, 5, Book, circulation, 2014-06-01 21:32:01)
[1ms] Select * from `circulations` where `reader_id` = 1 and `returned` = 
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125, 111)
[2ms] Select * from `books` where `books`.`id` in (4, 5, 6)
[6ms] Update `book_items` set `status` = 1 where `id` = 111
[1ms] Select * from `book_items` where `id` = 111 limit 1
[7ms] Update `books` set `lended` = `lended` + 1, `updated_at` = 2014-06-01 21:32:01 where `id` = 5
[3ms] Update `books` set `lend_count` = `lend_count` + 1, `updated_at` = 2014-06-01 21:32:01 where `id` = 5
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/circulation/book
Process   CirculationController@loadBook
Type      AJAX
Params    {"barcode":"8931000470116","readerId":"1"}
Queries   9

[2ms] Select * from `configs` where `key` = last_execute limit 1
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `book_items` where `barcode` = 8931000470116 limit 1
[2ms] Select * from `books` where `books`.`id` in (5)
[2ms] Select * from `readers`
[1ms] Select * from `circulations` where `returned` =  and `circulations`.`reader_id` in (1)
[2ms] Select * from `book_items` where `book_items`.`id` in (87, 125, 111)
[2ms] Select * from `books` where `books`.`id` in (4, 5, 6)
[1ms] Select * from `circulations` where `book_item_id` = 111 and `reader_id` = 1 limit 1
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/circulation/book
Process   CirculationController@loadBook
Type      AJAX
Params    {"barcode":"8931000470123","readerId":"1"}
Queries   8

[2ms] Select * from `configs` where `key` = last_execute limit 1
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Select * from `book_items` where `barcode` = 8931000470123 limit 1
[2ms] Select * from `books` where `books`.`id` in (5)
[2ms] Select * from `readers`
[2ms] Select * from `circulations` where `returned` =  and `circulations`.`reader_id` in (1)
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125, 111)
[2ms] Select * from `books` where `books`.`id` in (4, 5, 6)
====================================================================================================
====================================================================================================
Started   [POST] http://localhost:8000/admin/circulation/borrow/1
Process   CirculationController@borrow
Type      AJAX
Params    {"readerId":"1","bookItemId":"112"}
Queries   14

[1ms] Select * from `configs` where `key` = last_execute limit 1
[2ms] Select * from `accounts` where `id` = 1 limit 1
[2ms] Insert into `circulations` (`reader_id`, `book_item_id`, `scope`, `expired_at`, `created_at`, `created_by`) values (1, 112, 1, 2014-06-01 21:32:30, 2014-06-01 21:32:30, 1)
[2ms] Select * from `readers` where `readers`.`id` = 1 limit 1
[1ms] Select * from `book_items` where `book_items`.`id` = 112 limit 1
[1ms] Select * from `books` where `books`.`id` = 5 limit 1
[2ms] Insert into `activities` (`code`, `author_id`, `author_type`, `object_id`, `object_type`, `group`, `created_at`) values (borrowed_book, 1, Reader, 5, Book, circulation, 2014-06-01 21:32:30)
[2ms] Select * from `circulations` where `reader_id` = 1 and `returned` = 
[1ms] Select * from `book_items` where `book_items`.`id` in (87, 125, 111, 112)
[2ms] Select * from `books` where `books`.`id` in (4, 5, 6)
[3ms] Update `book_items` set `status` = 1 where `id` = 112
[1ms] Select * from `book_items` where `id` = 112 limit 1
[3ms] Update `books` set `lended` = `lended` + 1, `updated_at` = 2014-06-01 21:32:30 where `id` = 5
[2ms] Update `books` set `lend_count` = `lend_count` + 1, `updated_at` = 2014-06-01 21:32:30 where `id` = 5
====================================================================================================
